maintainer="Mitchell Scott <mitchell@scottlabs.io>"
pkgname=vellum-hosts
pkgver=1.0.0
pkgrel=0
_upstream_author="vellum-dev"
_category="utilities"
pkgdesc="Adds packages.vellum.delivery IP addresses to /etc/hosts"
url="https://github.com/vellum-dev/vellum"
arch="noarch"
license="MIT"
depends="mount-utils"
install="$pkgname.post-install $pkgname.post-upgrade $pkgname.pre-deinstall"
options="!check !fhs !strip !tracedeps"
source="
update-hosts.sh
LICENSE
"

package() {
	local install_dir="$pkgdir/home/root/.local/share/vellum-hosts"
	mkdir -p "$install_dir"

	install -Dm755 "$srcdir/update-hosts.sh" "$install_dir/update-hosts.sh"

	mkdir -p "$pkgdir/home/root/.vellum/licenses/$pkgname"
	install -Dm644 "$srcdir/LICENSE" \
		"$pkgdir/home/root/.vellum/licenses/$pkgname/LICENSE"
	echo "https://github.com/$_upstream_author/vellum" > \
		"$pkgdir/home/root/.vellum/licenses/$pkgname/SOURCES"

	install -Dm755 "$startdir/$pkgname.post-os-upgrade" \
		"$pkgdir/home/root/.vellum/hooks/post-os-upgrade/$pkgname"
}
sha512sums="
a1d6e29c0105e5d5b133f26478f51e4fac2a1dd50b06f349de8d17d0965e44fee03ea975bb0ce5a11d9987258f3e967c08dd4e03b7ecb23e39ddb7fc540c0bce  update-hosts.sh
b7a86c9fc7a740ff680037b0e6b646ccd70e4e74fef78669b8ba92e18b873e4673fbba064272c595d13bc016288cd4a0532cd974534b7fef43a5b065f24add95  LICENSE
"
