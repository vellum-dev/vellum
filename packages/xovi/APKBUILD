maintainer="Mitchell Scott <mitchell@scottlabs.io>"
pkgname=xovi
pkgver=0.3.2
pkgrel=1
_upstream_author="asivery"
_category="framework"
pkgdesc="Core xovi framework for reMarkable tablets"
url="https://github.com/asivery/xovi"
arch="aarch64 armv7"
license="GPL-3.0"
install="$pkgname.pre-deinstall"
options="!check !fhs !strip !tracedeps"

source="
https://github.com/asivery/xovi/releases/download/v$pkgver/xovi-aarch64.so
https://github.com/asivery/xovi/releases/download/v$pkgver/xovi-arm32.so
https://raw.githubusercontent.com/asivery/xovi/master/LICENSE
"


package() {
	local xovi_so

	case "$CARCH" in
		aarch64) xovi_so="xovi-aarch64.so" ;;
		armv7) xovi_so="xovi-arm32.so" ;;
	esac

	install -Dm644 "$srcdir"/$xovi_so "$pkgdir"/home/root/xovi/xovi.so

	install -Dm644 "$srcdir"/LICENSE \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/LICENSE
	echo "https://github.com/asivery/xovi/archive/refs/tags/v$pkgver.tar.gz" > \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/SOURCES
}
sha512sums="
72570b63fcd072a20abba298715334d1b9ecce6f8ae02b53c09bfe4c61263f95eb78302b494d3337e173841d3eaf840c14fbb4b4d9c76292bbb5e9389ee8870c  xovi-aarch64.so
6ad3b6db12ae486357d50aaaf2d8a257cdadec0d7a1ac7b27029db7357f6588962cba3309ae6a2298cfaebe2694d1f0264c2753c1252a6dd223fd138f6ee996d  xovi-arm32.so
d361e5e8201481c6346ee6a886592c51265112be550d5224f1a7a6e116255c2f1ab8788df579d9b8372ed7bfd19bac4b6e70e00b472642966ab5b319b99a2686  LICENSE
"
