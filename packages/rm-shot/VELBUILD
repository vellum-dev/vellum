maintainer="Mitchell Scott <mitchell@scottlabs.io>"
pkgname=rm-shot
pkgver=1.0.3
pkgrel=1
upstream_author="rmitchellscott"
category="utilities"
pkgdesc="Screenshot extension for xovi framework"
url="https://github.com/rmitchellscott/rm-shot"
arch="aarch64 armv7"
license="MIT"
depends="framebuffer-spy xovi-message-broker"
options="!check !fhs !strip !tracedeps"
source="
https://github.com/rmitchellscott/rm-shot/releases/download/v$pkgver/rm-shot-aarch64.so
https://github.com/rmitchellscott/rm-shot/releases/download/v$pkgver/rm-shot-armv7.so
https://raw.githubusercontent.com/rmitchellscott/rm-shot/main/LICENSE
"

package() {
	local so_file
	case "$CARCH" in
		aarch64) so_file="rm-shot-aarch64.so" ;;
		armv7) so_file="rm-shot-armv7.so" ;;
	esac

	install -Dm644 "$srcdir"/$so_file \
		"$pkgdir"/home/root/xovi/extensions.d/rm-shot.so

	install -Dm644 "$srcdir"/LICENSE \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/LICENSE
	echo "https://github.com/rmitchellscott/rm-shot/archive/refs/tags/v$pkgver.tar.gz" > \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/SOURCES
}
sha512sums="
2e26ba7ebdf09439f3c095f92fcc39517504c386319dbf1898b5b72788999aba7d7f64be20670b42e4c2bdf0265d9e882e4d074a0c9c3affb30f503f2fc0938b  rm-shot-aarch64.so
c05ea656cb1d42be1b8be4b8d1220d4164a6fc455d7abb4840a8deee2919c0ead3f9acbb45aa20fec93083ab033beb05f7f98284621dc21547dac490716b620a  rm-shot-armv7.so
b7a86c9fc7a740ff680037b0e6b646ccd70e4e74fef78669b8ba92e18b873e4673fbba064272c595d13bc016288cd4a0532cd974534b7fef43a5b065f24add95  LICENSE
"
