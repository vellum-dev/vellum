maintainer="notfrants <notfrants@proton.me>"
pkgname=jq
pkgver=1.8.1
pkgrel=0
upstream_author="jqlang"
category="utilities"
pkgdesc="Command-line JSON processor"
url="https://jqlang.org/"
arch="aarch64 armv7"
license="MIT"
options="!check !fhs !strip !tracedeps"

source="
https://github.com/jqlang/jq/releases/download/jq-$pkgver/jq-linux-arm64
https://github.com/jqlang/jq/releases/download/jq-$pkgver/jq-linux-armhf
https://raw.githubusercontent.com/jqlang/jq/refs/heads/master/COPYING
"

package() {
	local bin_file
	case "$CARCH" in
		aarch64)  bin_file="jq-linux-arm64" ;;
		armv7)  bin_file="jq-linux-armhf" ;;
	esac

	install -Dm755 "$srcdir"/$bin_file \
		"$pkgdir"/home/root/.vellum/bin/jq
	
	install -Dm644 "$srcdir"/COPYING \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/COPYING
	echo "https://github.com/jqlang/jq/archive/refs/tags/jq-$pkgver.tar.gz" > \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/SOURCES
}
sha512sums="
b1cdef9b4165362ba17f66b3b59e0dcc3c6d96be66768f66cef2aa7224e06b50c6cdf40ce4d63272ed5ec2d4a8392ab28e5a154ecdfa5b27f6c521868342e57a  jq-linux-arm64
2110905920a663b411fe0b453852169d5efe897fc059f8c8fba193fa67c515e0b2abf3f780c84c8409c51780bc79c76a94791c08c4e60bc62d33878c99137428  jq-linux-armhf
47326619798f35a4268e734bf1b9a03d2c3f46c66c5659141d218d3e3e7121093507bd94da083c6a71a7beb097870526ca7a448e2b2f3d567c02c65a62f074ca  COPYING
"
