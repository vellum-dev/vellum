maintainer="Mitchell Scott <mitchell@scottlabs.io>"
pkgname=rmtree
pkgver=1.0.1
pkgrel=1
upstream_author="rmitchellscott"
category="utilities"
pkgdesc="Display reMarkable document hierarchy in tree format"
url="https://github.com/rmitchellscott/rmtree"
arch="aarch64 armv7"
license="MIT"
options="!check !fhs !strip !tracedeps"

source="
https://github.com/rmitchellscott/rmtree/releases/download/v$pkgver/rmtree-aarch64.tar.gz
https://github.com/rmitchellscott/rmtree/releases/download/v$pkgver/rmtree-armv7.tar.gz
https://raw.githubusercontent.com/rmitchellscott/rmtree/main/LICENSE
"

unpack() {
	case "$CARCH" in
		aarch64) tar -xzf "$srcdir"/rmtree-aarch64.tar.gz -C "$srcdir" ;;
		armv7) tar -xzf "$srcdir"/rmtree-armv7.tar.gz -C "$srcdir" ;;
	esac
}

package() {
	local bin_file
	case "$CARCH" in
		aarch64) bin_file="rmtree-aarch64" ;;
		armv7) bin_file="rmtree-armv7" ;;
	esac

	install -Dm755 "$srcdir"/$bin_file \
		"$pkgdir"/home/root/.vellum/bin/rmtree

	install -Dm644 "$srcdir"/LICENSE \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/LICENSE
	echo "https://github.com/rmitchellscott/rmtree/archive/refs/tags/v$pkgver.tar.gz" > \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/SOURCES
}
sha512sums="
6633e47946d5d072e38c7d3cab1be8e2d14b93f082ce8e2de9c63e7e04a31e230ed18ccd4f16a1e5cee883adc8e5c4bf690141dd2df46f6c056067e09e9d3b51  rmtree-aarch64.tar.gz
b5a4d889cf6f09857ac022ee41028e1b31a61db93be466dd593122b8a83ae4605aeb3164a0158daa7b27507f20293a5bb2c7e4720fa0583118b2af14afcb936c  rmtree-armv7.tar.gz
b7a86c9fc7a740ff680037b0e6b646ccd70e4e74fef78669b8ba92e18b873e4673fbba064272c595d13bc016288cd4a0532cd974534b7fef43a5b065f24add95  LICENSE
"
