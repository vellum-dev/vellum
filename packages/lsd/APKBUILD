maintainer="notfrants <notfrants@proton.me>"
pkgname=lsd
pkgver=1.2.0
pkgrel=1
_upstream_author="lsd-rs"
_category="utilities"
pkgdesc="The next gen ls command"
url="https://github.com/lsd-rs/lsd"
arch="aarch64 armv7"
license="Apache-2.0"
options="!check !fhs !strip !tracedeps"
install="$pkgname.post-deinstall"

source="
https://github.com/lsd-rs/lsd/releases/download/v$pkgver/lsd-v$pkgver-arm-unknown-linux-gnueabihf.tar.gz
https://github.com/lsd-rs/lsd/releases/download/v$pkgver/lsd-v$pkgver-aarch64-unknown-linux-musl.tar.gz
"

unpack() {
	case "$CARCH" in
		aarch64)  tar --strip-components=1 -xzf "$srcdir"/lsd-v$pkgver-aarch64-unknown-linux-musl.tar.gz -C "$srcdir" ;;
		armv7|armhf)  tar --strip-components=1 -xzf "$srcdir"/lsd-v$pkgver-arm-unknown-linux-gnueabihf.tar.gz -C "$srcdir" ;;
	esac
}

package() {
	install -Dm755 "$srcdir"/lsd \
		"$pkgdir"/home/root/.vellum/bin/lsd

	install -Dm644 "$srcdir"/autocomplete/lsd.bash-completion \
		"$pkgdir"/home/root/.vellum/share/bash-completion/completions/lsd

	install -Dm644 "$srcdir"/LICENSE \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/LICENSE
	echo "https://github.com/lsd-rs/lsd/archive/refs/tags/v$pkgver.tar.gz" > \
		"$pkgdir"/home/root/.vellum/licenses/$pkgname/SOURCES
}
sha512sums="
505fc47e120f0c4fa5c3dc94e2c3e489f4927e8077fa43ab3c7c8e008e635c3e1ba6d6c7929318e373153ac935cdaf4e226e73bdd2ec6baccaab64b8fccb140b  lsd-v1.2.0-arm-unknown-linux-gnueabihf.tar.gz
ef51ef48bf42336b2c05ff918c68bf370547cf3f4d55d37df323e97c04d21fec920a98e72f0d1743f9d49326f4bff4c2874420a315c1985f131f102ac7be0cc7  lsd-v1.2.0-aarch64-unknown-linux-musl.tar.gz
"
